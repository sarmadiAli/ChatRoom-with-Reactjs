{"ast":null,"code":"var _jsxFileName = \"/home/alisarmadi/html/projects/chatroom/forntend/src/pages/chatRoom/chatroom.js\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport SocketIOClient from 'socket.io-client';\nimport Card from 'react-bootstrap/Card';\nimport './chatRoom.css';\nimport male_user from './img/male_user.png';\nimport famle_user from './img/woman(1).png';\n\nconst ChatRoom = props => {\n  // const massage = [\n  //     { id: Date.now(), mes: 'سلام', state: { name: props.location.state.name, gender: props.location.state.gender } },\n  //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n  //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n  //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n  //     { id: Date.now(), mes: 'خویی', state: { name: \"زیبا\", gender:\"0\" } },\n  //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n  //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n  //     { id: Date.now(), mes: 'مرسی', state: { name: props.location.state.name, gender: props.location.state.gender } }\n  // ]\n  const [messages, setMessages] = useState([]);\n  const [text, setText] = useState([]);\n  const socket = React.useRef(SocketIOClient.connect(\"http://localhost:3010/socket\"));\n  const scrollable = useRef();\n\n  let sumbit = e => {\n    e.preventDefault();\n    socket.current.emit(\"newMessage\", {\n      id: \"\",\n      date: new Date(),\n      mes: text,\n      state: {\n        name: props.location.state.name,\n        gender: props.location.state.gender\n      }\n    });\n    setText([\"\"]);\n  };\n\n  useEffect(() => {\n    socket.current.on(\"newMessage\", message => {\n      console.log(message);\n      setMessages(messages => messages.concat(message));\n      scrollable.current.scroll(0, scrollable.current.scrollHeight);\n    });\n  }, []);\n\n  const handleKeyDown = event => {\n    if (event.key === 'Enter') {\n      sumbit(e);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"cardChat \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    className: \"cardtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, \" \\u0635\\u0641\\u062D\\u0647 \\u0627\\u0635\\u0644\\u06CC \\u0686\\u062A \\u0631\\u0648\\u0645\"), /*#__PURE__*/React.createElement(Card.Body, {\n    ref: scrollable,\n    className: \"cardBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  }, messages.map(item => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: item.state.name === props.location.state.name ? \"imgDiv\" : \"imgDivReverc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.state.gender == \"0\" ? `${male_user}` : `${famle_user}`,\n      title: `${item.state.name}`,\n      className: \"imgUser\",\n      alt: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(Card.Text, {\n      className: \"textBorder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 45\n      }\n    }, item.mes));\n  })), /*#__PURE__*/React.createElement(Card.Footer, {\n    className: \"d-flex cardFooter justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"input1\",\n    onChange: e => setText(e.target.value),\n    value: text,\n    onKeyDown: handleKeyDown,\n    placeholder: `  تایپ کنید ...`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \" buttonA\",\n    onClick: sumbit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-cursor-fill\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }))))))));\n};\n\nexport default ChatRoom;","map":{"version":3,"sources":["/home/alisarmadi/html/projects/chatroom/forntend/src/pages/chatRoom/chatroom.js"],"names":["React","useEffect","useState","useRef","SocketIOClient","Card","male_user","famle_user","ChatRoom","props","messages","setMessages","text","setText","socket","connect","scrollable","sumbit","e","preventDefault","current","emit","id","date","Date","mes","state","name","location","gender","on","message","console","log","concat","scroll","scrollHeight","handleKeyDown","event","key","map","item","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\nimport SocketIOClient from 'socket.io-client'\nimport Card from 'react-bootstrap/Card'\nimport './chatRoom.css'\nimport male_user from './img/male_user.png'\nimport famle_user from './img/woman(1).png'\n\n\nconst ChatRoom = props => {\n    // const massage = [\n    //     { id: Date.now(), mes: 'سلام', state: { name: props.location.state.name, gender: props.location.state.gender } },\n    //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n    //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n    //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n    //     { id: Date.now(), mes: 'خویی', state: { name: \"زیبا\", gender:\"0\" } },\n    //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n    //     { id: Date.now(), mes: 'خویی', state: { name: props.location.state.name, gender: props.location.state.gender } },\n    //     { id: Date.now(), mes: 'مرسی', state: { name: props.location.state.name, gender: props.location.state.gender } }\n    // ]\n    const [messages, setMessages] = useState([])\n    const [text, setText] = useState([])\n    const socket = React.useRef(SocketIOClient.connect(\"http://localhost:3010/socket\"))\n    const scrollable = useRef()\n    let sumbit = e => {\n        e.preventDefault()\n        socket.current.emit(\"newMessage\", {\n            id: \"\",\n            date: new Date(),\n            mes: text,\n            state: {\n                name: props.location.state.name,\n                gender: props.location.state.gender\n            }\n        })\n        setText([\"\"])\n\n    }\n\n\n    useEffect(() => {\n        socket.current.on(\"newMessage\", (message) => {\n            console.log(message);\n            setMessages(messages => messages.concat(message));\n            scrollable.current.scroll(0, scrollable.current.scrollHeight)\n\n        })\n\n    }, [])\n    const handleKeyDown = (event) => {\n        if (event.key === 'Enter') {\n            sumbit(e)\n        }\n    }\n    return (\n        <div className='container'>\n            <div className=\"row\">\n                <div className='col'>\n                    <Card className=\"cardChat \">\n                        <Card.Header className=\"cardtitle\"> صفحه اصلی چت روم</Card.Header>\n                        <Card.Body ref={scrollable} className=\"cardBody\">\n\n\n                            {\n                                messages.map(item => {\n\n                                    return (\n                                        <div className={item.state.name === props.location.state.name ? \"imgDiv\" : \"imgDivReverc\"}  >\n\n                                            <img src={item.state.gender == \"0\" ? `${male_user}` : `${famle_user}`} title={`${item.state.name}`} className=\"imgUser\" alt=\"img\" />\n                                            <Card.Text className=\"textBorder\">\n                                                {item.mes}\n\n                                            </Card.Text>\n                                        </div>\n                                    )\n                                })\n                            }\n\n\n\n\n                        </Card.Body>\n                        <Card.Footer className=\"d-flex cardFooter justify-content-between\" >\n                            <input type=\"text\" className=\"input1\" onChange={e => setText(e.target.value)} value={text} onKeyDown={handleKeyDown} placeholder={`  تایپ کنید ...`} />\n                            <button className=\" buttonA\" onClick={sumbit}>\n                                <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-cursor-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                                    <path fillRule=\"evenodd\" d=\"M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z\" />\n                                </svg>\n                            </button>\n\n                        </Card.Footer>\n                    </Card>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ChatRoom"]},"metadata":{},"sourceType":"module"}